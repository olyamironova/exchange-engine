# exchange-engine

Exchange Engine — сервис для обмена валютами на бирже. Проект реализует полный цикл обработки ордеров: приём, сопоставление, исполнение, модификацию, отмену и сохранение состояния.  

## Немного терминов предметной области для большей ясности  
* *Ордер (Order)* — заявка на покупку или продажу актива, может быть рыночной или лимитной.
* *Торговая пара / символ (Symbol)* — уникальный идентификатор актива, например BTC/USD.
* *Ордербук (Orderbook)* — структура, где хранятся все открытые ордера по символу.
* *Сделка (Trade)* — результат сопоставления двух ордеров, фиксируется цена и количество.
* *Снимок (Snapshot)* — сохранённое состояние ордербука в момент времени, используется для отката или анализа.

Matching engine работает по принципу FIFO + Price Priority:
* Ордер с лучшей ценой исполняется первым.
* При равной цене ордера исполняются в порядке поступления (FIFO).

## Стек технологий
* Язык программирования: Go 1.21
* База данных: PostgreSQL + pgx
* Кэширование: Redis
* Мониторинг: Prometheus + Grafana
* Миграции: flyway
* Асинхронная обработка событий: Kafka

## API Endpoints
|`POST` | `/orders`| Создает новый ордер и возвращает массив выполненных сделок |
--------------------------------------------------------------------------------
|`PUT` | `/orders/{orderID}` | Модифицирует открытый ордер |
|`DELETE` | `/orders/{orderID}` | Отменяет открытый ордер |
|`GET`| `/orders/{orderID}`|Возвращает информацию по заявке (ордеру) по id ордера |
|`GET`|`/orders/{orderID}/trades`| Возвращает список сделок для конкретного ордера |
|`GET`|`/orderbook/{symbol}`| Возвращает текущее состояние биржевого стакана для торгового символа |
|`POST`|`/orderbook/{symbol}/snapshot`| Сохраняет снимок текущего биржевого стакана|
|`PUT`|`/orderbook/snapshot/{snapshotID}/restore`|Восстанавливает биржевой стакан из ранее сохраненного снимка |