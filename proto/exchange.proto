syntax = "proto3";

package exchange;

service Exchange {
  rpc SubmitOrder(SubmitOrderRequest) returns (SubmitOrderResponse);
  rpc GetOrderbook(GetOrderbookRequest) returns (GetOrderbookResponse);
}

message SubmitOrderRequest {
  string client_id = 1;
  string symbol = 2;
  string side = 3; // BUY/SELL
  string type = 4; // LIMIT/MARKET
  double price = 5;
  double quantity = 6;
}

message SubmitOrderResponse {
  string order_id = 1;
  repeated Trade trades = 2;
  double remaining = 3;
}

message GetOrderbookRequest {
  string symbol = 1;
}

message GetOrderbookResponse {
  repeated Order bids = 1;
  repeated Order asks = 2;
}

message Order {
  string id = 1;
  string client_id = 2;
  string symbol = 3;
  string side = 4;
  string type = 5;
  double price = 6;
  double quantity = 7;
  double remaining = 8;
}

message Trade {
  string id = 1;
  string buy_order = 2;
  string sell_order = 3;
  double price = 4;
  double quantity = 5;
  string timestamp = 6;
}
